# For-Pet Project (졸업프로젝트)
###### 프로젝트 진행중 개인 개발파트 코드만 올린 폴더입니다 (한 파일에 섞여있는경우 올리지 않았습니다)
##### darknet 모델을 이용하여 영상에서 동물을 감지하는 코드

##### 프로젝트 개요
* 플랫폼 : 안드로이드
* 개발기간 : 2019.05 ~ 2019.11
* 개발환경 : Windows, Python IDLE, Arduino IDE
* 개발언어 : Python3, C/C++
* 프로젝트 개요 : 무선 아두이노 모듈과 인공지능 모델을 이용, 반려동물의 전자기기 근처 접근 및 배뇨, 진동 등을 감지해 감전 및 단선 등의 안전사고를 예방하기 위한 프로젝트


##### 개발 파트 테스트 영상 (Youtube)
[![For-Pet 테스트영상](http://img.youtube.com/vi/Vq6QvA5jXlg/0.jpg)](https://youtu.be/Vq6QvA5jXlg)

* 담당 개발 기능
  * 아두이노 무선환경(아두이노 카메라 : 좌측화면)에서 PC로 영상 및 센서 데이터 전송
  * 해당 영상 데이터를 Python으로 처리 및 인공지능에 입력, 영상 내 동물 존재여부 판별
  * 아두이노 센서로부터 수분, 진동 데이터 감지 시 파이어 베이스 서버(좌측화면)에 전송
  * 영상 내 일정 크기 비율 이상 동물 감지 시 파이어 베이스 서버에 전송 (detect 변수)

##### 아두이노 기기 구조
![image26](https://user-images.githubusercontent.com/58656624/92324216-a699e000-f07a-11ea-972c-1f341015a489.png)
* 카메라, 진동센서, 수분 감지 센서 연결
* 영상, 센서 데이터를 와이파이를 통해 PC로 전송

* ArduCAM_ESP8266_UNO_Capture.ino : 
  * 아두이노에서 영상 데이터를 PC로 무선 전송
  * 바이트스트림에 특정 변수를 함께 전송하여 PC에서 해당 bit를 분리하여 제어에 사용

* team_41_process.py : 
  * 와이파이를 통해 입력 받은 아두이노 카메라 영상에서 동물이 탐지된 경우 해당 동물의 영상 내 크기 비율 계산
  * 화면의 40% 이상을 차지하는 경우 서버로 탐지여부와 시간 전송
  * 아두이노로부터 무선으로 입력 받은 바이트 스트림에서 진동 센서와 수분 감지 센서의 센서 값을 분리
  * 영상 바이트 스트림을 이미지화 하여 darknet으로 판별
  * darknet은 코드 일부 수정 후 자체 데이터를 통해 모델을 학습시켜 이용

